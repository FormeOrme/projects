<!DOCTYPE html>
<html lang="en">

<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.11.0/p5.js"></script>
    <script src="../util.js"></script>
    <script src="../distance.js"></script>
    <link rel="stylesheet" href="common.css">
    <meta charset="utf-8" />
</head>

<body>
    <script>
        class Wrapper {
            constructor([a, b, c, d, e, f]) {
                this.a = a;
                this.b = b;
                this.c = c;
                this.d = d;
                this.e = e;
                this.f = f;
            }

            toString() {
                return `${this.a}${this.b}${this.c}${this.d}${this.e}${this.f}`;
            }
        }

        const alphabeth = "0F";
        function randomChar() {
            return alphabeth[Math.floor(Math.random() * alphabeth.length)];
        }
        function randomString(length) {
            let result = '';
            for (let i = 0; i < length; i++) {
                result += randomChar();
            }
            return result;
        }
        const dataSet = Array.from({ length: 100 },
            (_, i) => randomString(6))
        .map(o => new Wrapper(o.split("")));

        const data = new DataContainer({
            dataSet: dataSet,
            distanceFunction: Distance.hammingObj,
        })

        console.log(data)

        function setup() {
            createCanvas(800, 800);

            stroke(0, 100);
            textSize(12);
            textAlign(CENTER, CENTER);
        }


        let coordinates = data.mds(111);
        let i = 10;
        function mousePressed() {
            i+=10;
            coordinates = data.mds(i);
        }
        function draw() {
            fill(255);
            text(`i: ${i}`, 0, -height / 2 + 20);

            const minX = Math.min(...coordinates.map(c => c.x));
            const maxX = Math.max(...coordinates.map(c => c.x));
            const minY = Math.min(...coordinates.map(c => c.y));
            const maxY = Math.max(...coordinates.map(c => c.y));

            console.log(minX, maxX, minY, maxY);

            background(40);
            translate(width / 2, height / 2);

            coordinates.forEach(c => {

                const x = map(c.x, minX, maxX, -width / 2 + 50, width / 2 - 50);
                const y = map(c.y, minY, maxY, -height / 2 + 50, height / 2 - 50);

                // text(c.o.toString(), x, y);

                fill(`#${c.o}`);
                ellipse(x, y, 10, 10);
            })
        }
    </script>
</body>

</html>